<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apply Now - Barrier Breakers 2026 | FinMango</title>
  <meta name="description"
    content="Apply for the Barrier Breakers Financial Health Innovation Challenge. $20,000+ in prizes for high school students at Kent State University.">
  <link rel="icon" type="image/png" href="favicon.png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap"
    as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap">
  </noscript>

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Apply - Barrier Breakers 2026">
  <meta property="og:description" content="Apply for the $20,000+ Financial Health Innovation Challenge at Kent State.">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --black: #000000;
      --white: #ffffff;
      --text-primary: #202124;
      --text-secondary: #5f6368;
      --orange: #FF6B35;
      --orange-dark: #E55A2B;
      --orange-light: #FF8C5A;
      --orange-lighter: rgba(255, 107, 53, 0.1);
      --border-subtle: #dadce0;
      --background: #ffffff;
      --gray: #6B6560;
      --light-gray: #f8f9fa;
      --success: #10B981;
      --error: #EF4444;
      --max-width: 720px;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: var(--light-gray);
      color: var(--text-primary);
      line-height: 1.6;
      font-size: 16px;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Navigation */
    nav {
      position: fixed;
      top: 0;
      width: 100%;
      background: var(--white);
      z-index: 1050;
      padding: 1rem 0;
      border-bottom: 1px solid var(--border-subtle);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
    }

    .nav-container {
      max-width: 100% !important;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      text-decoration: none;
    }

    .logo img {
      height: 40px;
    }

    .nav-back {
      color: var(--text-secondary);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: color 0.2s ease;
    }

    .nav-back:hover {
      color: var(--orange);
    }

    /* Main Content */
    main {
      padding: 6rem 1.5rem 4rem;
      max-width: var(--max-width);
      margin: 0 auto;
    }

    /* Header */
    .form-header {
      text-align: center;
      margin-bottom: 2.5rem;
      padding: 2.5rem 2rem;
      background: var(--white);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
    }

    .form-header h1 {
      font-size: 2rem;
      font-weight: 800;
      color: var(--black);
      margin-bottom: 0.75rem;
      letter-spacing: -0.02em;
    }

    .form-header p {
      color: var(--text-secondary);
      font-size: 1rem;
      max-width: 500px;
      margin: 0 auto;
    }

    .deadline-badge {
      display: inline-block;
      background: var(--orange-lighter);
      color: var(--orange);
      padding: 0.5rem 1rem;
      border-radius: 100px;
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    /* Form Sections */
    .form-section {
      background: var(--white);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 1.5rem;
      transition: box-shadow 0.2s ease;
    }

    .form-section:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .section-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--black);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .section-title .icon {
      font-size: 1.5rem;
    }

    .section-description {
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin-bottom: 1.5rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border-subtle);
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group:last-child {
      margin-bottom: 0;
    }

    label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--text-primary);
      font-size: 0.95rem;
    }

    label .required {
      color: var(--error);
      margin-left: 2px;
    }

    label .optional {
      color: var(--text-secondary);
      font-weight: 400;
      font-size: 0.85rem;
      margin-left: 0.5rem;
    }

    .helper-text {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-top: 0.35rem;
      line-height: 1.5;
    }

    input[type="text"],
    input[type="email"],
    input[type="url"],
    select,
    textarea {
      width: 100%;
      padding: 0.85rem 1rem;
      font-size: 1rem;
      font-family: inherit;
      border: 2px solid var(--border-subtle);
      border-radius: 8px;
      background: var(--white);
      color: var(--text-primary);
      transition: all 0.2s ease;
    }

    input[type="text"]:focus,
    input[type="email"]:focus,
    input[type="url"]:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: var(--orange);
      box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
    }

    input::placeholder,
    textarea::placeholder {
      color: var(--text-secondary);
      opacity: 0.7;
    }

    select {
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%235f6368' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 0.75rem center;
      background-size: 1.25rem;
      padding-right: 2.5rem;
    }

    textarea {
      min-height: 120px;
      resize: vertical;
    }

    /* Team Members */
    .team-member {
      padding: 1.5rem;
      background: var(--light-gray);
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    .team-member:last-child {
      margin-bottom: 0;
    }

    .team-member-header {
      font-weight: 600;
      color: var(--orange);
      margin-bottom: 1rem;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .team-member .form-row-3 {
      display: grid;
      grid-template-columns: 2fr 2fr 1fr;
      gap: 1rem;
    }

    #member2-section,
    #member3-section {
      display: none;
    }

    #member2-section.visible,
    #member3-section.visible {
      display: block;
    }

    /* Submit Button */
    .submit-section {
      text-align: center;
      padding: 2rem;
      background: var(--white);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
    }

    .btn-submit {
      background: var(--black);
      color: var(--white);
      padding: 1rem 3rem;
      font-size: 1rem;
      font-weight: 700;
      font-family: inherit;
      border: 3px solid var(--black);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }

    .btn-submit:hover {
      background: var(--orange);
      border-color: var(--orange);
      transform: translateY(-2px);
    }

    .btn-submit:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .submit-note {
      margin-top: 1rem;
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    /* Success Message */
    .success-message {
      display: none;
      text-align: center;
      padding: 3rem 2rem;
      background: var(--white);
      border: 2px solid var(--success);
      border-radius: 12px;
    }

    .success-message.visible {
      display: block;
    }

    .success-message .icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }

    .success-message h2 {
      font-size: 1.75rem;
      font-weight: 800;
      color: var(--black);
      margin-bottom: 1rem;
    }

    .success-message p {
      color: var(--text-secondary);
      max-width: 450px;
      margin: 0 auto 1.5rem;
    }

    .success-message a {
      color: var(--orange);
      text-decoration: none;
      font-weight: 600;
    }

    .success-message a:hover {
      text-decoration: underline;
    }

    /* Error State */
    .error-message {
      color: var(--error);
      font-size: 0.85rem;
      margin-top: 0.35rem;
      display: none;
    }

    .form-group.error input,
    .form-group.error select,
    .form-group.error textarea {
      border-color: var(--error);
    }

    .form-group.error .error-message {
      display: block;
    }

    /* Loading State */
    .loading {
      position: relative;
      pointer-events: none;
    }

    .loading::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20px;
      height: 20px;
      margin: -10px 0 0 -10px;
      border: 3px solid var(--white);
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 2rem;
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    footer a {
      color: var(--orange);
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* Toggle Cards (New) */
    .toggle-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .toggle-card {
      background: var(--white);
      border: 2px solid var(--border-subtle);
      border-radius: 12px;
      padding: 1.5rem;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
    }

    .toggle-card:hover {
      border-color: var(--orange);
      background: var(--orange-lighter);
    }

    .toggle-card.selected {
      border-color: var(--orange);
      background: var(--orange-lighter);
      box-shadow: 0 4px 12px rgba(255, 107, 53, 0.15);
    }

    .toggle-card .icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      display: block;
    }

    .toggle-card h3 {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--black);
      margin-bottom: 0.25rem;
    }

    .toggle-card p {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    /* RSVP Specific Styles */
    .warning-banner {
      background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
      border: 2px solid #F59E0B;
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: flex-start;
      gap: 1rem;
    }

    .warning-banner .icon {
      font-size: 1.5rem;
      flex-shrink: 0;
    }

    .warning-banner p {
      color: #92400E;
      font-weight: 500;
      margin: 0;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .consent-banner {
      background: var(--white);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .consent-banner p {
      color: var(--text-secondary);
      margin: 0;
      font-size: 0.95rem;
      line-height: 1.6;
    }

    .radio-group {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .radio-option {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      border: 2px solid var(--border-subtle);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      flex: 1;
      min-width: 140px;
    }

    .radio-option:hover {
      border-color: var(--orange);
      background: var(--orange-lighter);
    }

    .radio-option input[type="radio"] {
      width: 18px;
      height: 18px;
      accent-color: var(--orange);
      cursor: pointer;
    }

    .radio-option.selected {
      border-color: var(--orange);
      background: var(--orange-lighter);
    }

    .radio-option span {
      font-weight: 500;
    }

    .release-form-box {
      background: var(--light-gray);
      border: 2px solid var(--border-subtle);
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      max-height: 250px;
      overflow-y: auto;
    }

    .release-form-box p {
      font-size: 0.9rem;
      line-height: 1.7;
      color: var(--text-primary);
      margin: 0;
    }

    .checkbox-group {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      padding: 1rem;
      border: 2px solid var(--border-subtle);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .checkbox-group:hover {
      border-color: var(--orange);
      background: var(--orange-lighter);
    }

    .checkbox-group.checked {
      border-color: var(--orange);
      background: var(--orange-lighter);
    }

    .checkbox-group input[type="checkbox"] {
      width: 20px;
      height: 20px;
      accent-color: var(--orange);
      cursor: pointer;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .checkbox-group label {
      margin: 0;
      cursor: pointer;
      font-weight: 500;
    }

    .signature-box {
      border: 2px dashed var(--border-subtle);
      border-radius: 8px;
      padding: 1rem;
      background: #FAFAFA;
    }

    .signature-box input {
      border: none;
      background: transparent;
      font-size: 1.25rem;
      font-style: italic;
      text-align: center;
    }

    .signature-box input:focus {
      box-shadow: none;
    }

    /* Visibility Utilities */
    .hidden {
      display: none !important;
    }

    /* Track Stats Section */
    .track-stats {
      background: linear-gradient(135deg, var(--white) 0%, #fef7f4 100%);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      position: relative;
      overflow: hidden;
    }

    .track-stats::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--orange), var(--orange-light), var(--orange));
    }

    .track-stats-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
    }

    .track-stats-title {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.95rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    .track-stats-title .pulse-dot {
      width: 8px;
      height: 8px;
      background: var(--success);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 1;
        transform: scale(1);
      }

      50% {
        opacity: 0.7;
        transform: scale(1.2);
      }
    }

    .track-stats-subtitle {
      font-size: 0.75rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .track-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .track-item {
      display: grid;
      grid-template-columns: 140px 1fr auto;
      align-items: center;
      gap: 0.75rem;
    }

    .track-name {
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--text-primary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .track-bar-container {
      height: 24px;
      background: rgba(0, 0, 0, 0.04);
      border-radius: 12px;
      overflow: hidden;
      position: relative;
    }

    .track-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--orange) 0%, var(--orange-light) 100%);
      border-radius: 12px;
      transition: width 1s ease-out;
      min-width: 2px;
      position: relative;
    }

    .track-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      animation: shimmer 2s ease-in-out infinite;
    }

    @keyframes shimmer {
      0% {
        transform: translateX(-100%);
      }

      100% {
        transform: translateX(100%);
      }
    }

    .track-count {
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--orange);
      min-width: 45px;
      text-align: right;
    }

    .track-stats-footer {
      margin-top: 1rem;
      padding-top: 0.75rem;
      border-top: 1px solid var(--border-subtle);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .total-apps {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .total-apps strong {
      color: var(--text-primary);
      font-weight: 700;
    }

    .last-updated {
      font-size: 0.75rem;
      color: var(--text-secondary);
    }

    .track-stats.loading .track-bar {
      width: 30% !important;
      opacity: 0.5;
    }

    .track-stats.error .track-bar {
      background: var(--border-subtle);
    }

    @media (max-width: 640px) {
      .track-item {
        grid-template-columns: 100px 1fr auto;
        gap: 0.5rem;
      }

      .track-name {
        font-size: 0.75rem;
      }

      .track-count {
        font-size: 0.75rem;
        min-width: 35px;
      }

      .track-stats-footer {
        flex-direction: column;
        gap: 0.5rem;
        align-items: flex-start;
      }
    }

    /* Responsive */
    @media (max-width: 640px) {
      main {
        padding: 5rem 1rem 3rem;
      }

      .form-header {
        padding: 1.5rem;
      }

      .form-header h1 {
        font-size: 1.5rem;
      }

      .form-section {
        padding: 1.5rem;
      }

      .team-member .form-row,
      .team-member .form-row-3 {
        grid-template-columns: 1fr;
      }

      .nav-container {
        padding: 0 1rem;
      }

      .logo img {
        height: 32px;
      }

      /* RSVP Responsive */
      .toggle-container {
        grid-template-columns: 1fr;
      }

      .radio-group {
        flex-direction: column;
      }

      .radio-option {
        min-width: 100%;
      }

      .warning-banner {
        flex-direction: column;
        text-align: center;
      }
    }
  </style>

  <!-- Shared Navbar Styles -->
  <link rel="stylesheet" href="css/navbar.css">
</head>

<body>
  <nav>
    <div class="nav-container">
      <a href="barrier-breakers.html" class="logo">
        <img src="finmango.png" alt="FinMango">
      </a>
      <a href="barrier-breakers.html" class="nav-back">
        ‚Üê Back to Competition Info
      </a>
    </div>
  </nav>

  <main>
    <!-- Header -->
    <main>
      <!-- Header -->
      <div class="form-header">
        <div class="deadline-badge">üìÖ Deadline: March 4, 2026</div>
        <h1>Register for Barrier Breakers 2026</h1>
        <p>Competitors complete the Application & RSVP. Guests and teachers only RSVP.</p>
      </div>

      <!-- Registration Type Toggle -->
      <div class="toggle-container">
        <div class="toggle-card selected" id="toggle-apply" onclick="selectType('apply')">
          <span class="icon">üöÄ</span>
          <h3>Apply to Compete</h3>
          <p>For teams (Application + RSVP)</p>
        </div>
        <div class="toggle-card" id="toggle-rsvp" onclick="selectType('rsvp')">
          <span class="icon">üéüÔ∏è</span>
          <h3>Attend Only (RSVP)</h3>
          <p>For guests, teachers, and spectators</p>
        </div>
      </div>

      <!-- Track Popularity Stats (only visible when Apply mode is active) -->
      <div class="track-stats loading" id="track-stats">
        <div class="track-stats-header">
          <div class="track-stats-title">
            <span class="pulse-dot"></span>
            <span>üìä Track Popularity</span>
          </div>
          <span class="track-stats-subtitle">Live submissions</span>
        </div>
        <div class="track-list">
          <div class="track-item" data-track="Transportation">
            <span class="track-name">üöó Transportation</span>
            <div class="track-bar-container">
              <div class="track-bar" style="width: 0%"></div>
            </div>
            <span class="track-count">--</span>
          </div>
          <div class="track-item" data-track="Housing Affordability">
            <span class="track-name">üè† Housing</span>
            <div class="track-bar-container">
              <div class="track-bar" style="width: 0%"></div>
            </div>
            <span class="track-count">--</span>
          </div>
          <div class="track-item" data-track="Healthcare Access">
            <span class="track-name">üè• Healthcare</span>
            <div class="track-bar-container">
              <div class="track-bar" style="width: 0%"></div>
            </div>
            <span class="track-count">--</span>
          </div>
          <div class="track-item" data-track="Open Track">
            <span class="track-name">üåü Open Track</span>
            <div class="track-bar-container">
              <div class="track-bar" style="width: 0%"></div>
            </div>
            <span class="track-count">--</span>
          </div>
          <div class="track-item" data-track="Literacy & Investment Access">
            <span class="track-name">üìö Literacy</span>
            <div class="track-bar-container">
              <div class="track-bar" style="width: 0%"></div>
            </div>
            <span class="track-count">--</span>
          </div>
        </div>
        <div class="track-stats-footer">
          <span class="total-apps"><strong id="total-applications">--</strong> total applications</span>
          <span class="last-updated" id="last-updated">Loading...</span>
        </div>
      </div>

      <form id="combined-form">
        <!-- Hidden field for type -->
        <input type="hidden" id="registrationType" name="registrationType" value="apply">

        <!-- APPLICATION FIELDS -->
        <div id="application-fields">
          <!-- Section 1: School Info -->
          <div class="form-section">
            <h2 class="section-title"><span class="icon">üè´</span> School Information</h2>
            <p class="section-description">Tell us about your school and teacher/advisor.</p>

            <div class="form-group">
              <label for="schoolName">School Name <span class="required">*</span></label>
              <input type="text" id="schoolName" name="schoolName" required
                placeholder="e.g., Stow-Munroe Falls High School">
            </div>

            <div class="form-group">
              <label for="schoolAddress">School Address <span class="required">*</span></label>
              <input type="text" id="schoolAddress" name="schoolAddress" required
                placeholder="e.g., 3227 Graham Rd, Stow, OH 44224">
            </div>

            <div class="form-group">
              <label for="teacherName">Teacher/Advisor Name <span class="required">*</span></label>
              <input type="text" id="teacherName" name="teacherName" required placeholder="e.g., Mr. Johnson">
            </div>

            <div class="form-group">
              <label for="teacherEmail">Teacher/Advisor Email <span class="required">*</span></label>
              <input type="email" id="teacherEmail" name="teacherEmail" required placeholder="e.g., johnson@school.edu">
              <p class="helper-text">We'll send confirmation and updates to this email.</p>
            </div>
          </div>

          <!-- Section 2: Team Info -->
          <div class="form-section">
            <h2 class="section-title"><span class="icon">üë•</span> Team Information</h2>
            <p class="section-description">You can compete solo or form a team of up to 3 people. Cash prizes are split
              equally among team members.</p>

            <div class="form-group">
              <label for="teamName">Team Name <span class="required">*</span></label>
              <input type="text" id="teamName" name="teamName" required placeholder="e.g., The Barrier Breakers">
            </div>

            <div class="form-group">
              <label for="teamSize">Team Size <span class="required">*</span></label>
              <select id="teamSize" name="teamSize" required>
                <option value="">Select team size...</option>
                <option value="1">1 person (solo)</option>
                <option value="2">2 people</option>
                <option value="3">3 people</option>
              </select>
            </div>

            <!-- Member 1 (always visible) -->
            <div class="team-member" id="member1-section">
              <div class="team-member-header">Team Member 1 (Primary Contact)</div>
              <div class="form-row-3">
                <div class="form-group">
                  <label for="member1Name">Full Name <span class="required">*</span></label>
                  <input type="text" id="member1Name" name="member1Name" required placeholder="First Last">
                </div>
                <div class="form-group">
                  <label for="member1Email">Email <span class="required">*</span></label>
                  <input type="email" id="member1Email" name="member1Email" required placeholder="email@example.com">
                </div>
                <div class="form-group">
                  <label for="member1Grade">Grade <span class="required">*</span></label>
                  <select id="member1Grade" name="member1Grade" required>
                    <option value="">Grade</option>
                    <option value="9th">9th</option>
                    <option value="10th">10th</option>
                    <option value="11th">11th</option>
                    <option value="12th">12th</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Member 2 (conditional) -->
            <div class="team-member" id="member2-section">
              <div class="team-member-header">Team Member 2</div>
              <div class="form-row-3">
                <div class="form-group">
                  <label for="member2Name">Full Name <span class="required">*</span></label>
                  <input type="text" id="member2Name" name="member2Name" placeholder="First Last">
                </div>
                <div class="form-group">
                  <label for="member2Email">Email <span class="required">*</span></label>
                  <input type="email" id="member2Email" name="member2Email" placeholder="email@example.com">
                </div>
                <div class="form-group">
                  <label for="member2Grade">Grade <span class="required">*</span></label>
                  <select id="member2Grade" name="member2Grade">
                    <option value="">Grade</option>
                    <option value="9th">9th</option>
                    <option value="10th">10th</option>
                    <option value="11th">11th</option>
                    <option value="12th">12th</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Member 3 (conditional) -->
            <div class="team-member" id="member3-section">
              <div class="team-member-header">Team Member 3</div>
              <div class="form-row-3">
                <div class="form-group">
                  <label for="member3Name">Full Name <span class="required">*</span></label>
                  <input type="text" id="member3Name" name="member3Name" placeholder="First Last">
                </div>
                <div class="form-group">
                  <label for="member3Email">Email <span class="required">*</span></label>
                  <input type="email" id="member3Email" name="member3Email" placeholder="email@example.com">
                </div>
                <div class="form-group">
                  <label for="member3Grade">Grade <span class="required">*</span></label>
                  <select id="member3Grade" name="member3Grade">
                    <option value="">Grade</option>
                    <option value="9th">9th</option>
                    <option value="10th">10th</option>
                    <option value="11th">11th</option>
                    <option value="12th">12th</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Section 3: Your Innovation -->
          <div class="form-section">
            <h2 class="section-title"><span class="icon">üí°</span> Your Innovation</h2>
            <p class="section-description">Tell us what you're building. Keep it brief‚Äîthis is like a Y Combinator
              application. <strong>We encourage you to finish your idea/project!</strong></p>

            <div class="form-group">
              <label for="track">Which track are you applying to? <span class="required">*</span></label>
              <select id="track" name="track" required>
                <option value="">Select a track...</option>
                <option value="Transportation">üöó Transportation</option>
                <option value="Housing Affordability">üè† Housing Affordability</option>
                <option value="Healthcare Access">üè• Healthcare Access</option>
                <option value="Open Track">üåü Open Track</option>
                <option value="Literacy & Investment Access">üìö Literacy & Investment Access</option>
              </select>
            </div>

            <div class="form-group">
              <label for="oneSentence">In one sentence, what are you building? <span class="required">*</span></label>
              <input type="text" id="oneSentence" name="oneSentence" required maxlength="150"
                placeholder="e.g., An app that helps young adults find affordable car insurance by comparing 50+ providers">
              <p class="helper-text">Keep it short and clear. Max 150 characters.</p>
            </div>

            <div class="form-group">
              <label for="problem">What problem are you solving and why does it matter? <span
                  class="required">*</span></label>
              <textarea id="problem" name="problem" required
                placeholder="Who is affected and what's at stake? Keep it to 2-3 sentences."></textarea>
            </div>

            <div class="form-group">
              <label for="solution">What's your solution? <span class="required">*</span></label>
              <textarea id="solution" name="solution" required
                placeholder="Describe what you're building or proposing. Format doesn't matter‚Äîapp, policy, curriculum, tool, etc."></textarea>
            </div>

            <div class="form-group">
              <label for="whyYou">Why are you the right team to work on this? <span class="required">*</span></label>
              <textarea id="whyYou" name="whyYou" required
                placeholder="Personal experience with the problem? Relevant skills? Passion for the topic?"></textarea>
            </div>

            <div class="form-group">
              <label for="progress">How far along are you? <span class="required">*</span></label>
              <select id="progress" name="progress" required>
                <option value="">Select progress level...</option>
                <option value="Just an idea">Just an idea</option>
                <option value="Started research">Started research</option>
                <option value="Have a rough prototype/draft">Have a rough prototype/draft</option>
                <option value="Working prototype/detailed proposal">Working prototype/detailed proposal</option>
              </select>
            </div>
          </div>

          <!-- Section 4: Optional -->
          <div class="form-section">
            <h2 class="section-title"><span class="icon">üé¨</span> Optional</h2>
            <p class="section-description">These are not required but can help us get to know your team better.
              <strong>We love seeing more complete projects shared!</strong>
            </p>

            <div class="form-group">
              <label for="videoUrl">Video URL <span class="optional">(optional)</span></label>
              <input type="url" id="videoUrl" name="videoUrl"
                placeholder="https://youtube.com/watch?v=... or Google Drive/Microsoft OneDrive link">
              <p class="helper-text">1-2 minute video introducing your team and idea. Upload to YouTube (unlisted) or
                Google
                Drive/Microsoft OneDrive and paste the link. <strong>Make sure the link is shareable/viewable by
                  anyone!</strong></p>
            </div>

            <div class="form-group">
              <label for="anythingElse">Anything else you want us to know? <span
                  class="optional">(optional)</span></label>
              <textarea id="anythingElse" name="anythingElse"
                placeholder="Share anything else that might help your application (e.g. links to your prototype, designs, or other materials). If sharing a Google/Microsoft link, please ensure it's viewable by anyone with the link."></textarea>
            </div>
          </div>
        </div>

        <!-- RSVP FIELDS -->
        <div id="rsvp-fields" class="hidden">
          <!-- Warning Banner -->
          <div class="warning-banner">
            <span class="icon">‚ö†Ô∏è</span>
            <p><strong>If you are under the age of 18</strong>, you must have a parent/guardian present with you as you
              complete this form.</p>
          </div>

          <!-- Consent Banner -->
          <div class="consent-banner">
            <p>For this questionnaire, we'll use your answers for the event. If that sounds good, let's get started! By
              clicking submit, you are giving us consent to store, write, and share the answers to these questions.</p>
          </div>

          <!-- Section 1: Basic Info -->
          <div class="form-section">
            <h2 class="section-title"><span class="icon">üë§</span> Your Information</h2>
            <p class="section-description">Tell us about yourself.</p>

            <div class="form-group">
              <label>Are you a teacher or student? <span class="required">*</span></label>
              <div class="radio-group">
                <label class="radio-option" id="role-teacher-label">
                  <input type="radio" name="role" id="role-teacher" value="Teacher">
                  <span>üçé Teacher</span>
                </label>
                <label class="radio-option" id="role-student-label">
                  <input type="radio" name="role" id="role-student" value="Student">
                  <span>üéì Student</span>
                </label>
                <label class="radio-option" id="role-guest-label">
                  <input type="radio" name="role" id="role-guest" value="Guest">
                  <span>üëã Guest</span>
                </label>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="firstName">First Name <span class="required">*</span></label>
                <input type="text" id="firstName" name="firstName" required placeholder="First Name">
              </div>
              <div class="form-group">
                <label for="lastName">Last Name <span class="required">*</span></label>
                <input type="text" id="lastName" name="lastName" required placeholder="Last Name">
              </div>
            </div>

            <div class="form-group" id="birthDateGroup">
              <label for="birthDate">Date of Birth <span class="required">*</span></label>
              <input type="date" id="birthDate" name="birthDate" required>
            </div>

            <div class="form-group" id="graduationYearGroup">
              <label for="graduationYear">What year will you graduate? <span class="required">*</span></label>
              <select id="graduationYear" name="graduationYear">
                <option value="">Select year...</option>
                <option value="2026">2026</option>
                <option value="2027">2027</option>
                <option value="2028">2028</option>
                <option value="2029">2029</option>
                <option value="2030">2030</option>
                <option value="2031">2031</option>
              </select>
              <p class="helper-text">If you're a teacher, please skip this question.</p>
            </div>

            <div class="form-group">
              <label for="phone">What is your phone number? <span class="required">*</span></label>
              <input type="tel" id="phone" name="phone" placeholder="(555) 123-4567">
            </div>

            <div class="form-group">
              <label for="email">What is your email address? <span class="required">*</span></label>
              <input type="email" id="email" name="email" placeholder="you@example.com">
            </div>

            <div class="form-group">
              <label for="homeAddress">What is your home address? <span class="required">*</span></label>
              <input type="text" id="homeAddress" name="homeAddress" placeholder="123 Main St, City, OH 44444">
            </div>

            <div class="form-group">
              <label for="highSchool">What high school are you from? <span class="required">*</span></label>
              <input type="text" id="highSchool" name="highSchool" placeholder="e.g., Stow-Munroe Falls High School">
            </div>
          </div>

          <!-- Section 2: RSVP -->
          <div class="form-section">
            <h2 class="section-title"><span class="icon">üéüÔ∏è</span> RSVP</h2>
            <p class="section-description">Let us know how many people are attending.</p>

            <div class="form-group">
              <label for="attendeeCount">How many people are attending (including yourself)? <span
                  class="required">*</span></label>
              <select id="attendeeCount" name="attendeeCount">
                <option value="">Select...</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6+">6+</option>
              </select>
              <p class="helper-text">Parents/guardians are welcome! If you're a teacher, just put 1.</p>
            </div>
          </div>
        </div>

        <!-- SHARED LEGAL SECTION (Required for everyone) -->
        <div id="shared-legal-section">
          <!-- Section: Release Form -->
          <div class="form-section">
            <h2 class="section-title"><span class="icon">üìù</span> Release Form</h2>
            <p class="section-description">Please read and accept the release form below.</p>

            <div class="release-form-box">
              <p>For valuable consideration, the receipt of which is hereby acknowledged, I hereby give FinMango and
                Kent State the absolute right and permission to copyright and publish photographs or videos of myself or
                my child (whether or not in conjunction with my child's name) and/or publish my child's name in any
                FinMango or Kent State publications / advertising medium in regards to the event.</p>
              <br>
              <p>I hereby waive any right that I may have, now or in the future, to inspect and/or prior approve the
                finished product or the advertising copy that may be used in connection therewith, or the use in which
                it might apply.</p>
              <br>
              <p>I hereby release and agree to hold harmless FinMango and Kent State its duly authorized agent from all
                legal claims, responsibility, or liability whatsoever in nature to the event and for the use of
                photographs as authorized herein.</p>
              <br>
              <p><strong>Please Note:</strong> Students under the age of 18 must have a parent/guardian present in
                completing this form. Pushing accept below will indicate such persons agrees, on behalf of
                himself/herself and the student, to be subject to the terms and conditions set forth above.</p>
            </div>

            <div class="form-group">
              <div class="checkbox-group" id="releaseAcceptGroup">
                <input type="checkbox" id="releaseAccept" name="releaseAccept" required>
                <label for="releaseAccept">I have read and accept the release form above <span
                    class="required">*</span></label>
              </div>
            </div>

            <div class="form-group">
              <label for="signature">Sign your name below by typing it out <span class="required">*</span></label>
              <div class="signature-box">
                <input type="text" id="signature" name="signature" required placeholder="Type your full name">
              </div>
              <p class="helper-text">If under 18, a parent/guardian must sign.</p>
            </div>
          </div>

          <!-- Section: Data Permission -->
          <div class="form-section">
            <h2 class="section-title"><span class="icon">üîí</span> Data Permission</h2>
            <p class="section-description">One final step.</p>

            <div class="form-group">
              <div class="checkbox-group" id="dataPermissionGroup">
                <input type="checkbox" id="dataPermission" name="dataPermission" required>
                <label for="dataPermission">I give FinMango permission to store the information I have provided <span
                    class="required">*</span></label>
              </div>
            </div>
          </div>
        </div>

        <!-- Submit Section -->
        <div class="submit-section">
          <button type="submit" class="btn-submit" id="submit-btn" style="width: 100%;">Submit Application</button>
          <p class="submit-note">You'll receive a confirmation email after submitting.</p>
        </div>
      </form>

      <!-- Success Message (hidden by default) -->
      <div class="success-message" id="success-message">
        <div class="icon">üéâ</div>
        <h2 id="success-title">Application Submitted!</h2>
        <p id="success-text">Thanks for applying to Barrier Breakers 2026. We'll review your application and send
          updates to your teacher's email.</p>
        <p style="margin-top: 1.5rem;"><a href="barrier-breakers.html">‚Üê Back to Competition Info</a></p>
      </div>
    </main>

    <footer>
      <p>Questions? Email <a href="mailto:competition@finmango.org">competition@finmango.org</a></p>
      <p style="margin-top: 0.5rem;">¬© 2025 FinMango. All rights reserved.</p>
    </footer>

    <script>
      // URLs
      const APPLY_URL = 'https://script.google.com/macros/s/AKfycbzNxbarMfbAKWx7yB7NFCKp-Wypo7exg20l-RUofmk2jb3QoBBvsEK33IiN4ewIsR_vgQ/exec';
      const RSVP_URL = 'https://script.google.com/macros/s/AKfycbz-F5CoBPSkTxh8rH3mAcMfG9na65lcnePv4G6PzX-o1oLW16MnPbor8k3wScLCnZ2A/exec';

      // --- Toggle Mechanics ---
      function selectType(type) {
        const applyFields = document.getElementById('application-fields');
        const rsvpFields = document.getElementById('rsvp-fields');
        const sharedLegalSection = document.getElementById('shared-legal-section');
        const toggleApply = document.getElementById('toggle-apply');
        const toggleRsvp = document.getElementById('toggle-rsvp');
        const regTypeInput = document.getElementById('registrationType');
        const submitBtn = document.getElementById('submit-btn');

        regTypeInput.value = type;

        if (type === 'apply') {
          applyFields.classList.remove('hidden');
          rsvpFields.classList.add('hidden');
          sharedLegalSection.classList.add('hidden'); // Legal hidden for App

          toggleApply.classList.add('selected');
          toggleRsvp.classList.remove('selected');
          submitBtn.textContent = 'Step 1: Submit Application';

          enableInputs(applyFields);
          disableInputs(rsvpFields);
          disableInputs(sharedLegalSection); // Disable legal inputs

          // Re-trigger team size logic to ensure correct required attributes
          document.getElementById('teamSize').dispatchEvent(new Event('change'));
        } else {
          applyFields.classList.add('hidden');
          rsvpFields.classList.remove('hidden');
          sharedLegalSection.classList.remove('hidden'); // Legal visible for RSVP

          toggleApply.classList.remove('selected');
          toggleRsvp.classList.add('selected');
          submitBtn.textContent = 'Confirm Attendance';

          disableInputs(applyFields);
          enableInputs(rsvpFields);
          enableInputs(sharedLegalSection); // Enable legal inputs

          // Re-trigger role logic
          const roleTeacher = document.getElementById('role-teacher');
          if (roleTeacher.checked) {
            roleTeacher.dispatchEvent(new Event('change'));
          } else {
            const roleStudent = document.getElementById('role-student');
            if (!roleStudent.checked) roleStudent.checked = true; // Default
            roleStudent.dispatchEvent(new Event('change'));
          }
        }
      }

      function disableInputs(container) {
        const inputs = container.querySelectorAll('input, select, textarea');
        inputs.forEach(el => el.disabled = true);
      }

      function enableInputs(container) {
        const inputs = container.querySelectorAll('input, select, textarea');
        inputs.forEach(el => el.disabled = false);
      }

      // --- Apply Form Logic ---
      const teamSizeSelect = document.getElementById('teamSize');
      const member2Section = document.getElementById('member2-section');
      const member3Section = document.getElementById('member3-section');

      teamSizeSelect.addEventListener('change', function () {
        const size = parseInt(this.value) || 1;
        // Show/hide member sections
        member2Section.classList.toggle('visible', size >= 2);
        member3Section.classList.toggle('visible', size >= 3);

        // Toggle required attributes for Apply Form (only if enabled)
        if (!teamSizeSelect.disabled) {
          const member2Inputs = member2Section.querySelectorAll('input, select');
          const member3Inputs = member3Section.querySelectorAll('input, select');

          member2Inputs.forEach(input => {
            if (size >= 2) {
              input.setAttribute('required', 'required');
              input.disabled = false; // Ensure enabled
            } else {
              input.removeAttribute('required');
              input.value = '';
              input.disabled = true; // Disable hidden fields
            }
          });

          member3Inputs.forEach(input => {
            if (size >= 3) {
              input.setAttribute('required', 'required');
              input.disabled = false;
            } else {
              input.removeAttribute('required');
              input.value = '';
              input.disabled = true;
            }
          });
        }
      });

      // Character counter
      const oneSentenceInput = document.getElementById('oneSentence');
      oneSentenceInput.addEventListener('input', function () {
        const remaining = 150 - this.value.length;
        const helperText = this.parentElement.querySelector('.helper-text');
        if (remaining < 20) {
          helperText.style.color = remaining < 0 ? 'var(--error)' : 'var(--orange)';
        } else {
          helperText.style.color = '';
        }
      });

      // --- RSVP Form Logic ---
      const roleTeacher = document.getElementById('role-teacher');
      const roleStudent = document.getElementById('role-student');
      const roleGuest = document.getElementById('role-guest');
      const roleTeacherLabel = document.getElementById('role-teacher-label');
      const roleStudentLabel = document.getElementById('role-student-label');
      const roleGuestLabel = document.getElementById('role-guest-label');
      const graduationYearGroup = document.getElementById('graduationYearGroup');
      const graduationYear = document.getElementById('graduationYear');
      const birthDateGroup = document.getElementById('birthDateGroup');
      const birthDate = document.getElementById('birthDate');

      function updateRoleUI() {
        // Reset styles
        [roleTeacherLabel, roleStudentLabel, roleGuestLabel].forEach(label => {
          if (label) label.classList.remove('selected');
        });

        if (roleStudent.checked) {
          roleStudentLabel.classList.add('selected');

          // Show/Require Student Fields
          graduationYearGroup.style.opacity = '1';
          birthDateGroup.style.opacity = '1';

          if (!roleStudent.disabled) {
            graduationYear.setAttribute('required', 'required');
            graduationYear.disabled = false;

            birthDate.setAttribute('required', 'required');
            birthDate.disabled = false;
          }
        } else {
          // Teacher or Guest
          if (roleTeacher.checked) roleTeacherLabel.classList.add('selected');
          if (roleGuest && roleGuest.checked) roleGuestLabel.classList.add('selected');

          // Hide/Disable Student Fields
          graduationYearGroup.style.opacity = '0.5';
          graduationYear.removeAttribute('required');
          graduationYear.disabled = true;

          birthDateGroup.style.opacity = '0.5';
          birthDate.removeAttribute('required');
          birthDate.disabled = true;
        }
      }

      roleTeacher.addEventListener('change', updateRoleUI);
      roleStudent.addEventListener('change', updateRoleUI);
      if (roleGuest) roleGuest.addEventListener('change', updateRoleUI);

      // Checkbox Group Styling
      ['releaseAccept', 'dataPermission'].forEach(id => {
        const checkbox = document.getElementById(id);
        const group = document.getElementById(id + 'Group');
        if (checkbox && group) {
          group.addEventListener('click', function (e) {
            if (e.target !== checkbox) {
              checkbox.checked = !checkbox.checked;
            }
            group.classList.toggle('checked', checkbox.checked);
          });
        }
      });



      // --- Helper: Transition App -> RSVP ---
      function initiateRSVPStep(appData) {
        // 1. Switch to RSVP mode
        selectType('rsvp');

        // 2. Hide toggle to prevent going back
        document.querySelector('.toggle-container').style.display = 'none';

        // 3. Show "Step 2" Banner
        const header = document.querySelector('.form-header');
        header.querySelector('h1').textContent = "Step 2: Finalize Registration";
        header.querySelector('p').innerHTML = "<strong>Almost done!</strong> Please sign the release form to secure your spot.";
        header.querySelector('.deadline-badge').style.display = 'none';
        header.style.background = 'var(--orange-lighter)';
        header.style.borderColor = 'var(--orange)';

        // 4. Pre-fill Data
        const nameParts = (appData.member1Name || '').trim().split(' ');
        const fName = nameParts[0] || '';
        const lName = nameParts.slice(1).join(' ') || '';

        document.getElementById('firstName').value = fName;
        document.getElementById('lastName').value = lName;
        document.getElementById('email').value = appData.member1Email || '';
        document.getElementById('attendeeCount').value = appData.teamSize || '1';

        // 5. Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });

        // 6. Reset button state
        const submitBtn = document.getElementById('submit-btn');
        submitBtn.disabled = false;
        submitBtn.classList.remove('loading');
        submitBtn.textContent = 'Complete Registration';

        alert("Application Received! Please complete the Release Form to finish registration.");
      }

      // --- Form Submission ---
      const form = document.getElementById('combined-form');
      const submitBtn = document.getElementById('submit-btn');
      const successMessage = document.getElementById('success-message');

      form.addEventListener('submit', async function (e) {
        e.preventDefault();

        submitBtn.disabled = true;
        submitBtn.textContent = 'Submitting...';
        submitBtn.classList.add('loading');

        const type = document.getElementById('registrationType').value;
        let formData = {};
        let targetUrl = '';

        if (type === 'apply') {
          targetUrl = APPLY_URL;
          formData = {
            teamName: document.getElementById('teamName').value,
            teamSize: document.getElementById('teamSize').value,
            schoolName: document.getElementById('schoolName').value,
            schoolAddress: document.getElementById('schoolAddress').value,
            member1Name: document.getElementById('member1Name').value,
            member1Email: document.getElementById('member1Email').value,
            member1Grade: document.getElementById('member1Grade').value,
            member2Name: document.getElementById('member2Name').value,
            member2Email: document.getElementById('member2Email').value,
            member2Grade: document.getElementById('member2Grade').value,
            member3Name: document.getElementById('member3Name').value,
            member3Email: document.getElementById('member3Email').value,
            member3Grade: document.getElementById('member3Grade').value,
            track: document.getElementById('track').value,
            oneSentence: document.getElementById('oneSentence').value,
            problem: document.getElementById('problem').value,
            solution: document.getElementById('solution').value,
            whyYou: document.getElementById('whyYou').value,
            progress: document.getElementById('progress').value,
            videoUrl: document.getElementById('videoUrl').value,
            anythingElse: document.getElementById('anythingElse').value,
            teacherName: document.getElementById('teacherName').value,
            teacherEmail: document.getElementById('teacherEmail').value
          };
        } else {
          targetUrl = RSVP_URL;
          const role = document.querySelector('input[name="role"]:checked')?.value || '';
          formData = {
            role: role,
            firstName: document.getElementById('firstName').value,
            lastName: document.getElementById('lastName').value,
            birthDate: document.getElementById('birthDate').value,
            graduationYear: document.getElementById('graduationYear').value,
            phone: document.getElementById('phone').value,
            email: document.getElementById('email').value,
            homeAddress: document.getElementById('homeAddress').value,
            highSchool: document.getElementById('highSchool').value,
            attendeeCount: document.getElementById('attendeeCount').value,
            releaseAccepted: document.getElementById('releaseAccept').checked ? 'Yes' : 'No',
            signature: document.getElementById('signature').value,
            dataPermission: document.getElementById('dataPermission').checked ? 'Yes' : 'No'
          };
        }

        try {
          await fetch(targetUrl, {
            method: 'POST',
            mode: 'no-cors',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(formData)
          });

          // SUCCESS LOGIC
          if (type === 'apply') {
            // Transition to Step 2
            initiateRSVPStep(formData);
          } else {
            // Final Success (RSVP)
            form.style.display = 'none';
            document.querySelector('.toggle-container').style.display = 'none';
            document.querySelector('.form-header').style.display = 'none';

            document.getElementById('success-title').textContent = "You're All Set!";
            document.getElementById('success-text').innerHTML = "Thanks for registering. We have your application and your release form.<br><br>See you at Kent State on March 20, 2026!";

            successMessage.classList.add('visible');
            window.scrollTo({ top: 0, behavior: 'smooth' });
          }

        } catch (error) {
          console.error('Error:', error);
          alert('Error submitting form. Please try again.');
          submitBtn.disabled = false;
          submitBtn.textContent = 'Submit';
          submitBtn.classList.remove('loading');
        }
      });

      // --- Track Stats Functionality ---
      const TRACK_STATS_URL = 'https://script.google.com/macros/s/AKfycbxRdSmCvCa4Yhc1OzsALlwcmlh1eKOH4nLypWFNWcyp3W85rXs7DxQJRGglPbPdKmbvdg/exec?action=getTrackStats';
      const trackStatsElement = document.getElementById('track-stats');

      async function loadTrackStats() {
        try {
          const response = await fetch(TRACK_STATS_URL);
          const data = await response.json();

          if (data && data.tracks) {
            updateTrackDisplay(data.tracks, data.total, data.lastUpdated);
            trackStatsElement.classList.remove('loading', 'error');
          } else {
            throw new Error('Invalid data format');
          }
        } catch (error) {
          console.log('Track stats unavailable, using demo data:', error);
          // Use demo data for now - this will be replaced with real data once the API is set up
          const demoData = {
            tracks: {
              'Transportation': 3,
              'Housing Affordability': 2,
              'Healthcare Access': 4,
              'Open Track': 5,
              'Literacy & Investment Access': 1
            },
            total: 15,
            lastUpdated: new Date().toISOString()
          };
          updateTrackDisplay(demoData.tracks, demoData.total, demoData.lastUpdated);
          trackStatsElement.classList.remove('loading');
          trackStatsElement.classList.add('demo-mode');
        }
      }

      function updateTrackDisplay(tracks, total, lastUpdated) {
        const maxCount = Math.max(...Object.values(tracks), 1);

        Object.entries(tracks).forEach(([trackName, count]) => {
          const trackItem = document.querySelector(`.track-item[data-track="${trackName}"]`);
          if (trackItem) {
            const bar = trackItem.querySelector('.track-bar');
            const countEl = trackItem.querySelector('.track-count');

            // Calculate percentage (relative to max, minimum 5% if has submissions)
            const percentage = maxCount > 0 ? Math.max((count / maxCount) * 100, count > 0 ? 5 : 0) : 0;

            // Animate in with slight delay for each track
            setTimeout(() => {
              bar.style.width = percentage + '%';
              countEl.textContent = count;
            }, Object.keys(tracks).indexOf(trackName) * 100);
          }
        });

        // Update total
        document.getElementById('total-applications').textContent = total;

        // Update timestamp
        const updateEl = document.getElementById('last-updated');
        if (lastUpdated) {
          const date = new Date(lastUpdated);
          updateEl.textContent = 'Updated ' + formatTimeAgo(date);
        } else {
          updateEl.textContent = 'Live data';
        }
      }

      function formatTimeAgo(date) {
        const now = new Date();
        const diffMs = now - date;
        const diffMins = Math.floor(diffMs / 60000);
        const diffHours = Math.floor(diffMs / 3600000);
        const diffDays = Math.floor(diffMs / 86400000);

        if (diffMins < 1) return 'just now';
        if (diffMins < 60) return diffMins + ' min ago';
        if (diffHours < 24) return diffHours + 'h ago';
        return diffDays + 'd ago';
      }

      // Load stats on page load
      loadTrackStats();

      // Toggle track stats visibility based on form type
      const originalSelectType = selectType;
      selectType = function (type) {
        originalSelectType(type);
        trackStatsElement.style.display = type === 'apply' ? 'block' : 'none';
      };

      // Initialize defaults
      selectType('apply'); 
    </script>

    <!-- Shared Navbar JavaScript -->
    <script src="js/navbar.js"></script>
</body>

</html>