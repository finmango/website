<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Primary Meta Tags -->
    <title>Financial Health Barometer | Real-Time US Economic Stress Map - FinMango</title>
    <meta name="title" content="Financial Health Barometer | Real-Time US Economic Stress Map - FinMango">
    <meta name="description"
        content="Track financial anxiety, food insecurity, housing stress, and affordability across all 50 US states in real-time. Powered by Google Health Trends API. Free research tool for policymakers and academics.">
    <meta name="keywords"
        content="financial health, economic stress, financial anxiety, food insecurity, housing stress, affordability, US states, heatmap, Google Trends, research, data visualization, FinMango">
    <meta name="author" content="FinMango Research Team">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://finmango.org/barometer.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://finmango.org/barometer.html">
    <meta property="og:title" content="Financial Health Barometer | Real-Time US Economic Stress Map">
    <meta property="og:description"
        content="Track financial anxiety, food insecurity, housing stress, and affordability across all 50 US states in real-time. Powered by Google Health Trends API.">
    <meta property="og:image" content="https://finmango.org/og-barometer.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="FinMango">
    <meta property="og:locale" content="en_US">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://finmango.org/barometer.html">
    <meta name="twitter:title" content="Financial Health Barometer | Real-Time US Economic Stress Map">
    <meta name="twitter:description"
        content="Track financial anxiety, food insecurity, housing stress, and affordability across all 50 US states in real-time.">
    <meta name="twitter:image" content="https://finmango.org/og-barometer.png">
    <meta name="twitter:site" content="@finaboromanga">

    <!-- Structured Data / JSON-LD -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Financial Health Barometer",
      "description": "Real-time US financial health indicators powered by Google Health Trends API. Track financial anxiety, food insecurity, housing stress, and affordability across all 50 states.",
      "url": "https://finmango.org/barometer.html",
      "applicationCategory": "Research Tool",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Organization",
        "name": "FinMango",
        "url": "https://finmango.org"
      },
      "publisher": {
        "@type": "Organization",
        "name": "FinMango",
        "logo": {
          "@type": "ImageObject",
          "url": "https://finmango.org/finmango.png"
        }
      },
      "datePublished": "2025-12-08",
      "dateModified": "2025-12-08"
    }
    </script>

    <!-- Favicons -->
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DW5HBYS9JW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-DW5HBYS9JW');
    </script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Core Colors - Google-inspired minimalism */
            --bg: #fafafa;
            --text: #1a1a1a;
            --text-muted: #666666;
            --surface: #f0f0f0;
            --orange: #FF6B35;
            --orange-dark: #E55A2B;
            --border: rgba(0, 0, 0, 0.1);
            --white: #ffffff;

            /* Status Colors */
            --green: #10B981;
            --yellow: #F59E0B;
            --red: #EF4444;

            /* Spacing */
            --section-padding: 80px;
            --container-max: 1200px;
            --gap: 32px;
            --radius: 12px;
            --radius-pill: 100px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            font-weight: 400;
        }

        /* Glassmorphic Header */
        .dashboard-header {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: var(--container-max);
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-link {
            display: flex;
            align-items: center;
            text-decoration: none;
        }

        .logo-link img {
            height: 36px;
        }

        .header-title h1 {
            font-size: clamp(1rem, 2vw, 1.25rem);
            font-weight: 700;
            color: var(--text);
        }

        .header-subtitle {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--green);
            background: rgba(16, 185, 129, 0.1);
            padding: 0.4rem 0.8rem;
            border-radius: var(--radius-pill);
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--green);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.6;
                transform: scale(0.9);
            }
        }

        .last-updated {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Main Layout */
        .dashboard-main {
            max-width: var(--container-max);
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        /* Indicator Cards */
        .indicator-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--gap);
            margin-bottom: 3rem;
        }

        .indicator-card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.25s ease;
            position: relative;
        }

        .indicator-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
            border-color: var(--orange);
        }

        .indicator-card.active {
            background: linear-gradient(135deg, var(--orange) 0%, var(--orange-dark) 100%);
            color: var(--white);
            border-color: var(--orange);
            box-shadow: 0 8px 30px rgba(255, 107, 53, 0.3);
        }

        .indicator-card.active .indicator-label {
            opacity: 0.9;
        }

        .indicator-card.active .indicator-change {
            color: var(--white);
            opacity: 0.9;
        }

        .indicator-label {
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
        }

        .indicator-value {
            font-size: clamp(2rem, 4vw, 2.75rem);
            font-weight: 800;
            line-height: 1;
            margin-bottom: 0.5rem;
            color: var(--orange);
        }

        .indicator-card.active .indicator-value {
            color: var(--white);
        }

        .indicator-change {
            font-size: 0.875rem;
            font-weight: 600;
        }

        .indicator-change.up {
            color: var(--red);
        }

        .indicator-change.down {
            color: var(--green);
        }

        /* Segmented Toggle */
        .indicator-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        .toggle-container {
            display: inline-flex;
            background: var(--surface);
            border-radius: var(--radius-pill);
            padding: 4px;
            gap: 4px;
            border: 1px solid var(--border);
        }

        .toggle-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            background: transparent;
            border-radius: var(--radius-pill);
            font-family: inherit;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.25s ease;
            white-space: nowrap;
        }

        .toggle-btn:hover {
            color: var(--text);
            background: rgba(255, 107, 53, 0.08);
        }

        .toggle-btn.active {
            background: linear-gradient(135deg, var(--orange) 0%, var(--orange-dark) 100%);
            color: var(--white);
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
        }

        @media (max-width: 700px) {
            .toggle-container {
                flex-wrap: wrap;
                justify-content: center;
            }

            .toggle-btn {
                padding: 0.6rem 1rem;
                font-size: 0.7rem;
            }
        }

        /* Map Section */
        .map-section {
            position: relative;
            margin-bottom: 3rem;
        }

        .map-container {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 2rem;
            position: relative;
            overflow: visible;
        }

        .map-wrapper {
            position: relative;
            width: 100%;
            margin: 0 auto;
        }

        #us-map {
            width: 100%;
            height: auto;
            display: block;
        }

        #us-map svg {
            width: 100%;
            height: auto;
            display: block;
        }

        #us-map path {
            transition: all 0.25s ease;
            cursor: pointer;
            stroke: var(--white);
            stroke-width: 1.5;
        }

        #us-map path:hover {
            opacity: 0.85;
            stroke-width: 2;
            filter: brightness(1.1);
        }

        #blob-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }

        /* State Tooltip */
        .state-tooltip {
            position: fixed;
            background: var(--text);
            color: var(--white);
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 0.875rem;
            pointer-events: none;
            z-index: 20;
            opacity: 0;
            transition: opacity 0.2s ease;
            white-space: nowrap;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .state-tooltip.visible {
            opacity: 1;
        }

        .tooltip-state {
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .tooltip-value {
            opacity: 0.9;
            color: var(--orange);
            font-weight: 600;
        }

        /* Map Legend */
        .map-legend {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1.5rem;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-color {
            width: 20px;
            height: 10px;
            border-radius: 3px;
        }

        .legend-low {
            background: #10B981;
        }

        .legend-moderate {
            background: #F59E0B;
        }

        .legend-elevated {
            background: #F97316;
        }

        .legend-high {
            background: #EF4444;
        }

        /* State Detail Panel */
        .state-panel {
            position: fixed;
            top: 0;
            right: -420px;
            width: 400px;
            height: 100vh;
            background: var(--white);
            border-left: 1px solid var(--border);
            padding: 2rem;
            z-index: 200;
            transition: right 0.3s ease;
            overflow-y: auto;
            box-shadow: -10px 0 40px rgba(0, 0, 0, 0.1);
        }

        .state-panel.open {
            right: 0;
        }

        .panel-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--surface);
            border: none;
            font-size: 1.25rem;
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .panel-close:hover {
            background: var(--orange);
            color: var(--white);
        }

        .panel-title {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            padding-right: 2rem;
            color: var(--text);
        }

        .panel-indicators {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .panel-indicator {
            padding: 1rem;
            background: var(--surface);
            border-radius: var(--radius);
            border-left: 4px solid var(--orange);
        }

        .panel-indicator-label {
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .panel-indicator-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-indicator-value {
            font-size: 1.5rem;
            font-weight: 800;
        }

        .panel-indicator-meta {
            text-align: right;
            font-size: 0.75rem;
        }

        .panel-rank {
            font-weight: 700;
            color: var(--orange);
        }

        .panel-change {
            color: var(--text-muted);
        }

        .panel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(4px);
            z-index: 150;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .panel-overlay.visible {
            opacity: 1;
            pointer-events: auto;
        }

        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text);
        }

        /* Chart Section */
        .chart-section {
            margin-bottom: 3rem;
        }

        .chart-controls {
            display: flex;
            gap: 0.75rem;
        }

        .chart-controls select {
            padding: 0.6rem 1.25rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-pill);
            background: var(--white);
            font-family: inherit;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text);
        }

        .chart-controls select:hover {
            border-color: var(--orange);
        }

        .chart-controls select:focus {
            outline: none;
            border-color: var(--orange);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.15);
        }

        .chart-container {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
            height: 350px;
        }

        /* Rankings Table */
        .rankings-section {
            margin-bottom: 3rem;
        }

        .rankings-table-container {
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
            background: var(--white);
            overflow-x: auto;
            /* Ensure horizontal scroll on small screens */
        }

        .rankings-table {
            width: 100%;
            border-collapse: collapse;
        }

        .rankings-table th,
        .rankings-table td {
            padding: 1rem 1.25rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .rankings-table th {
            background: var(--surface);
            color: var(--text);
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .rankings-table th:hover {
            color: var(--orange);
        }

        .rankings-table tbody tr {
            transition: all 0.2s ease;
        }

        .rankings-table tbody tr:hover {
            background: rgba(255, 107, 53, 0.04);
        }

        .rankings-table tbody tr:last-child td {
            border-bottom: none;
        }

        .rank-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, var(--orange) 0%, var(--orange-dark) 100%);
            color: var(--white);
            font-weight: 700;
            font-size: 0.75rem;
            border-radius: 50%;
        }

        .table-pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.25rem;
            background: var(--surface);
            border-top: 1px solid var(--border);
        }

        .pagination-info {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .pagination-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .pagination-btn {
            padding: 0.5rem 1.25rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-pill);
            background: var(--white);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            color: var(--text);
        }

        .pagination-btn:hover:not(:disabled) {
            background: var(--orange);
            border-color: var(--orange);
            color: var(--white);
        }

        .pagination-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Researcher Tools */
        .tools-section {
            margin-bottom: 3rem;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
        }

        .tool-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.75rem;
            padding: 1.5rem 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--white);
            cursor: pointer;
            transition: all 0.25s ease;
            text-decoration: none;
            color: var(--text);
        }

        .tool-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
            border-color: var(--orange);
        }

        .tool-btn:hover .tool-icon {
            transform: scale(1.1);
        }

        .tool-btn:hover .tool-label {
            color: var(--orange);
        }

        .tool-icon {
            font-size: 1.5rem;
            transition: transform 0.25s ease;
        }

        .tool-label {
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: color 0.25s ease;
        }

        /* Methodology */
        .methodology-section {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 2.5rem;
        }

        .methodology-section h3 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--text);
        }

        .methodology-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .methodology-item h4 {
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
            color: var(--orange);
        }

        .methodology-item p {
            font-size: 0.875rem;
            color: var(--text-muted);
            line-height: 1.7;
            max-width: 700px;
        }

        /* Footer */
        .dashboard-footer {
            background: var(--text);
            color: var(--white);
            padding: 3rem 2rem;
            text-align: center;
            margin-top: 4rem;
        }

        .footer-citation {
            font-size: 0.875rem;
            opacity: 0.7;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.7;
        }

        /* Mobile Responsive */
        @media (max-width: 1100px) {
            :root {
                --section-padding: 60px;
                --gap: 20px;
            }

            .indicator-cards {
                grid-template-columns: repeat(2, 1fr);
            }

            .state-panel {
                width: 100%;
                right: -100%;
            }

            .chart-controls {
                flex-wrap: wrap;
            }
        }

        /* Methodology & Data Dictionary */
        .methodology-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            text-align: left;
        }

        .methodology-item.full-width {
            grid-column: 1 / -1;
        }

        .data-dictionary {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            font-size: 0.9rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            overflow: hidden;
        }

        .data-dictionary th,
        .data-dictionary td {
            text-align: left;
            padding: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .data-dictionary th {
            background: rgba(255, 255, 255, 0.1);
            font-weight: 600;
            color: var(--primary);
        }

        .data-dictionary tr:last-child td {
            border-bottom: none;
        }

        .citation-block {
            background: #f8fafc;
            border: 1px solid var(--border);
            padding: 1rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            margin-top: 0.5rem;
            color: var(--text);
            user-select: all;
            /* Makes selection easier */
        }

        @media (max-width: 600px) {
            .indicator-cards {
                grid-template-columns: 1fr;
            }

            .header-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .dashboard-main {
                padding: 2rem 1rem;
            }

            .section-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .data-dictionary {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
        }

        /* Standard Navigation Styles */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: var(--bg);
            z-index: 1000;
            padding: 1.5rem 0;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
        }

        nav.scrolled {
            padding: 1rem 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(10px);
            background: rgba(250, 250, 250, 0.97);
        }

        .nav-container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            transition: transform 0.3s ease;
            justify-self: start;
        }

        .logo:hover {
            transform: rotate(-2deg) scale(1.05);
        }

        .logo img {
            height: 46px;
            transition: height 0.3s ease;
        }

        nav.scrolled .logo img {
            height: 38px;
        }

        .nav-right {
            display: flex;
            gap: 1.75rem;
            align-items: center;
            justify-self: end;
        }

        .nav-right a {
            color: var(--text);
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.2s ease;
            position: relative;
            white-space: nowrap;
            letter-spacing: -0.01em;
        }

        .nav-right a:not(.btn-donate):not(.btn-get-involved):not(.dropdown-item)::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--orange);
            transition: width 0.3s ease;
        }

        .nav-right a:not(.btn-donate):not(.btn-get-involved):not(.dropdown-item):hover::after {
            width: 100%;
        }

        .nav-right a:not(.btn-donate):not(.btn-get-involved):not(.dropdown-item):hover {
            color: var(--orange);
        }

        .btn-donate {
            background: var(--orange);
            color: white !important;
            padding: 0.5rem 1rem;
            text-decoration: none;
            font-weight: 700;
            transition: all 0.2s ease;
            border: 2px solid var(--text);
            position: relative;
            overflow: hidden;
            font-size: 0.85rem;
            white-space: nowrap;
            letter-spacing: 0.01em;
        }

        .btn-donate:hover {
            transform: scale(1.05);
        }

        .btn-get-involved {
            background: transparent;
            color: var(--text) !important;
            padding: 0.5rem 1rem;
            text-decoration: none;
            font-weight: 700;
            transition: all 0.2s ease;
            border: 2px solid var(--text);
            position: relative;
            overflow: hidden;
            font-size: 0.85rem;
            white-space: nowrap;
            letter-spacing: 0.01em;
        }

        .btn-get-involved:hover {
            color: white !important;
            background: var(--text);
            transform: scale(1.05);
        }

        /* Mobile Menu Controls */
        .mobile-controls {
            display: none;
            gap: 1rem;
            align-items: center;
            justify-self: end;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            min-width: 48px;
            min-height: 48px;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .mobile-menu-btn span {
            display: block;
            width: 28px;
            height: 3px;
            background: var(--text);
            margin: 3px 0;
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .mobile-menu-btn.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .mobile-menu-btn.active span:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        .mobile-menu {
            display: none;
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100vh;
            background: var(--bg);
            z-index: 999;
            padding: 6rem 2rem;
            transition: right 0.3s ease;
            overflow-y: auto;
            flex-direction: column;
            gap: 2rem;
        }

        .mobile-menu.active {
            display: flex;
            right: 0;
        }

        .mobile-menu a {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--text);
            text-decoration: none;
            letter-spacing: -0.02em;
        }

        /* Dropdown Styles */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--white);
            min-width: 240px;
            box-shadow: 8px 8px 0 var(--text);
            border: 3px solid var(--text);
            z-index: 1001;
            padding: 0.5rem 0;
            margin-top: 0;
        }

        /* Bridge for hover */
        .dropdown-content::after {
            content: '';
            position: absolute;
            top: -15px;
            left: 0;
            width: 100%;
            height: 15px;
        }

        .dropdown-content::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 0 8px 8px 8px;
            border-style: solid;
            border-color: transparent transparent var(--text) transparent;
        }

        .dropdown:hover .dropdown-content {
            display: block;
            animation: fadeIn 0.2s ease;
        }

        .dropdown-item {
            color: var(--text) !important;
            padding: 0.85rem 1.5rem;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.2s ease;
            font-weight: 600;
            font-size: 0.95rem !important;
            text-align: left;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .nav-right .dropdown-item::after {
            display: none !important;
        }

        .dropdown-item:hover {
            background-color: var(--surface);
            padding-left: 1.75rem;
            color: var(--orange) !important;
        }

        .badge-beta {
            display: inline-block;
            background: var(--text);
            color: var(--white);
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 0.5rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .dropdown-item:hover .badge-beta {
            background: var(--orange);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, 10px);
            }

            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

        /* Adjust Dashboard Header to sit below Nav */
        .dashboard-header {
            margin-top: 80px;
            position: relative;
            top: 0;
            z-index: 10;
        }

        @media (max-width: 968px) {
            .nav-container {
                grid-template-columns: 1fr auto;
                gap: 1rem;
            }

            .nav-right {
                display: none;
            }

            .mobile-controls {
                display: flex;
            }

            .mobile-menu-btn {
                display: flex;
            }

            .dashboard-header {
                margin-top: 100px;
                top: 0;
            }
        }
    </style>
    <style>
        /* Announcement Bar */
        .announcement-bar {
            background: linear-gradient(135deg, var(--orange), #ff8c5a);
            color: white;
            text-align: center;
            padding: 12px 48px;
            font-size: 0.95rem;
            font-weight: 600;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1100;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            box-shadow: 0 2px 10px rgba(255, 107, 53, 0.3);
        }

        .announcement-bar a {
            color: white;
            text-decoration: underline;
            font-weight: 700;
        }

        .announcement-bar a:hover {
            opacity: 0.9;
        }

        .announcement-close {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 4px 8px;
            opacity: 0.8;
            transition: opacity 0.2s, transform 0.2s;
            line-height: 1;
        }

        .announcement-close:hover {
            opacity: 1;
            transform: translateY(-50%) scale(1.2);
        }

        .announcement-bar.hidden {
            display: none;
        }

        body.has-announcement nav {
            top: var(--announcement-height) !important;
        }

        body.has-announcement .mobile-menu {
            top: var(--announcement-height) !important;
            height: calc(100vh - var(--announcement-height)) !important;
        }

        /* Push content down */
        body.has-announcement {
            padding-top: var(--announcement-height) !important;
        }

        /* Adjust sticky header if present */
        body.has-announcement .dashboard-header {
            top: var(--announcement-height) !important;
        }

        @media (max-width: 768px) {
            .announcement-bar {
                font-size: 0.85rem;
                padding: 10px 40px 10px 16px;
            }

            .announcement-close {
                right: 8px;
            }
        }
    </style>
    <style>
        /* Mobile Menu Accordion Overrides */
        .mobile-menu {
            padding: 5rem 1.5rem 2rem !important;
        }

        .mobile-menu a {
            font-size: 1.5rem !important;
            /* Smaller than 2rem */
            padding: 1rem 0 !important;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
        }

        .mobile-dropdown-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            background: none;
            border: none;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            padding: 1rem 0;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--black);
            cursor: pointer;
            text-align: left;
            font-family: inherit;
        }

        .mobile-dropdown-toggle .arrow {
            transition: transform 0.3s ease;
            font-size: 1.2rem;
        }

        .mobile-dropdown-toggle.active .arrow {
            transform: rotate(180deg);
            color: var(--orange);
        }

        .mobile-dropdown-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: #f9f9f9;
            margin: 0 -1.5rem;
            /* Full width background */
            padding: 0 1.5rem;
            /* Inner padding */
        }

        .mobile-dropdown-content.open {
            max-height: 500px;
            /* Arbitrary large height */
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .mobile-dropdown-content a {
            font-size: 1.1rem !important;
            padding: 0.75rem 0 !important;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;
            color: var(--gray) !important;
            padding-left: 1rem !important;
        }

        .mobile-dropdown-content a:hover {
            color: var(--orange) !important;
            padding-left: 1.5rem !important;
            background: rgba(0, 0, 0, 0.02);
        }
    </style>
</head>

<body class="has-announcement">

    <div class="announcement-bar" id="announcementBar">
        üöÄ <strong>Barrier Breakers:</strong> $20,000+ in prizes for high school students!
        <a href="barrier-breakers.html">Apply by Feb. 27th ‚Üí</a>
        <button class="announcement-close" id="closeAnnouncement" aria-label="Close announcement">√ó</button>
    </div>


    <nav id="nav">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <img src="finmango.png" alt="FinMango">
            </a>

            <div class="nav-right">
                <a href="about.html">About</a>

                <div class="dropdown">
                    <a href="research.html" style="cursor: pointer;">Research ‚ñæ</a>
                    <div class="dropdown-content">
                        <a href="research.html" class="dropdown-item">Overview</a>
                        <a href="affordability-lab.html" class="dropdown-item">Affordability Lab <span
                                class="badge-beta">Beta</span></a>
                        <a href="barometer.html" class="dropdown-item">Barometer üìä</a>
                        <a href="https://github.com/finmango/research" class="dropdown-item" target="_blank"
                            rel="noopener noreferrer">GitHub üîó</a>
                    </div>
                </div>

                <div class="dropdown"><a href="education.html" style="cursor: pointer;">Education ‚ñæ</a>
                    <div class="dropdown-content"><a href="education.html#millionaire-mindset"
                            class="dropdown-item">Millionaire Mindset üí∞</a><a href="barrier-breakers.html"
                            class="dropdown-item">Barrier Breakers üöÄ</a><a href="resources.html"
                            class="dropdown-item">Resources üõ†Ô∏è</a></div>
                </div>
                <a href="ambassadors.html">Ambassadors</a>

                <a href="get-involved.html" class="btn-get-involved">Get Involved</a>
                <a href="donate.html" class="btn-donate">Donate</a>
            </div>

            <div class="mobile-controls">
                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </nav>


    <div class="mobile-menu" id="mobileMenu">
        <a href="about.html">About</a>

        <div class="mobile-dropdown">
            <button class="mobile-dropdown-toggle">Research <span class="arrow">‚ñæ</span></button>
            <div class="mobile-dropdown-content">
                <a href="research.html">Overview</a>
                <a href="affordability-lab.html">Affordability Lab</a>
                <a href="barometer.html">Barometer</a>
                <a href="https://github.com/finmango/research" target="_blank" rel="noopener noreferrer">GitHub</a>
            </div>
        </div>

        <div class="mobile-dropdown">
            <button class="mobile-dropdown-toggle">Education <span class="arrow">‚ñæ</span></button>
            <div class="mobile-dropdown-content">
                <a href="education.html#millionaire-mindset">Millionaire Mindset</a>
                <a href="barrier-breakers.html">Barrier Breakers</a>
                <a href="resources.html">Resources</a>
            </div>
        </div>

        <a href="ambassadors.html">Ambassadors</a>
        <a href="donate.html">Donate</a>
    </div>


    <!-- Header -->
    <header class="dashboard-header">
        <div class="header-content">
            <div class="header-left">
                <div class="header-title">
                    <h1>Financial Health Barometer</h1>
                    <div class="header-subtitle">Real-Time Economic Stress Indicators</div>
                </div>
            </div>
            <div class="header-right">
                <div class="live-indicator"><span class="live-dot"></span> LIVE</div>
                <div class="last-updated">Last updated: <span id="last-updated-date">Loading...</span></div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="dashboard-main">

        <!-- Indicator Cards -->
        <section class="indicator-cards" id="indicator-cards">
            <div class="indicator-card active" data-indicator="financial_anxiety">
                <div class="indicator-label">Financial Anxiety</div>
                <div class="indicator-value" id="val-financial_anxiety">--</div>
                <div class="indicator-change" id="change-financial_anxiety">--</div>
            </div>
            <div class="indicator-card" data-indicator="food_insecurity">
                <div class="indicator-label">Food Insecurity</div>
                <div class="indicator-value" id="val-food_insecurity">--</div>
                <div class="indicator-change" id="change-food_insecurity">--</div>
            </div>
            <div class="indicator-card" data-indicator="housing_stress">
                <div class="indicator-label">Housing Stress</div>
                <div class="indicator-value" id="val-housing_stress">--</div>
                <div class="indicator-change" id="change-housing_stress">--</div>
            </div>
            <div class="indicator-card" data-indicator="affordability">
                <div class="indicator-label">Affordability</div>
                <div class="indicator-value" id="val-affordability">--</div>
                <div class="indicator-change" id="change-affordability">--</div>
            </div>
        </section>

        <!-- Indicator Toggle (Segmented) -->
        <div class="indicator-toggle">
            <div class="toggle-container" id="indicator-toggle">
                <button class="toggle-btn active" data-indicator="financial_anxiety">Financial Anxiety</button>
                <button class="toggle-btn" data-indicator="food_insecurity">Food Insecurity</button>
                <button class="toggle-btn" data-indicator="housing_stress">Housing Stress</button>
                <button class="toggle-btn" data-indicator="affordability">Affordability</button>
            </div>
        </div>

        <!-- Map Section -->
        <section class="map-section">
            <div class="map-container">
                <div class="map-wrapper">
                    <svg id="us-map" viewBox="0 0 959 593" preserveAspectRatio="xMidYMid meet"></svg>
                </div>
                <div class="state-tooltip" id="state-tooltip">
                    <div class="tooltip-state"></div>
                    <div class="tooltip-value"></div>
                </div>
            </div>
            <div class="map-legend">
                <div class="legend-item">
                    <div class="legend-color legend-low"></div> Low (&lt;90)
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-moderate"></div> Moderate (90-120)
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-elevated"></div> Elevated (120-150)
                </div>
                <div class="legend-item">
                    <div class="legend-color legend-high"></div> High (&gt;150)
                </div>
            </div>
        </section>

        <!-- Time Series Chart -->
        <section class="chart-section">
            <div class="section-header">
                <h2 class="section-title">Trend Over Time</h2>
                <div class="chart-controls">
                    <select id="chart-indicator">
                        <option value="financial_anxiety">Financial Anxiety</option>
                        <option value="food_insecurity">Food Insecurity</option>
                        <option value="housing_stress">Housing Stress</option>
                        <option value="affordability">Affordability</option>
                    </select>
                    <select id="chart-period">
                        <option value="1d">Last Day</option>
                        <option value="1w">Last Week</option>
                        <option value="1m">Last Month</option>
                        <option value="3m">Last 3 Months</option>
                        <option value="6m">Last 6 Months</option>
                        <option value="12m" selected>Last 12 Months</option>
                        <option value="5y">Last 5 Years</option>
                        <option value="10y">Last 10 Years</option>
                        <option value="15y">Last 15 Years</option>
                    </select>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="trend-chart"></canvas>
            </div>
        </section>

        <!-- State Rankings -->
        <section class="rankings-section">
            <div class="section-header">
                <h2 class="section-title">State Rankings</h2>
            </div>
            <div class="rankings-table-container">
                <table class="rankings-table" id="rankings-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>State</th>
                            <th data-sort="financial_anxiety">Anxiety ‚Üï</th>
                            <th data-sort="food_insecurity">Food ‚Üï</th>
                            <th data-sort="housing_stress">Housing ‚Üï</th>
                            <th data-sort="affordability">Afford ‚Üï</th>
                        </tr>
                    </thead>
                    <tbody id="rankings-body"></tbody>
                </table>
                <div class="table-pagination">
                    <div class="pagination-info">Showing <span id="page-start">1</span>-<span id="page-end">10</span> of
                        51</div>
                    <div class="pagination-buttons">
                        <button class="pagination-btn" id="prev-btn" disabled>‚Üê Prev</button>
                        <button class="pagination-btn" id="next-btn">Next ‚Üí</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Researcher Tools -->
        <section class="tools-section">
            <div class="section-header">
                <h2 class="section-title">Researcher Tools</h2>
            </div>
            <div class="tools-grid">
                <button class="tool-btn" id="download-csv"><span class="tool-icon">üì•</span><span
                        class="tool-label">Download CSV</span></button>
                <button class="tool-btn" id="download-json"><span class="tool-icon">üì•</span><span
                        class="tool-label">Download JSON</span></button>
                <button class="tool-btn" id="copy-citation"><span class="tool-icon">üìã</span><span
                        class="tool-label">Copy Citation</span></button>
                <a class="tool-btn" href="https://github.com/finmango/research/blob/main/WHITEPAPER_2025.md"
                    target="_blank" rel="noopener noreferrer"><span class="tool-icon">üìÑ</span><span
                        class="tool-label">Whitepaper</span></a>
                <button class="tool-btn" id="embed-widget"><span class="tool-icon">üîó</span><span
                        class="tool-label">Embed Widget</span></button>
                <a class="tool-btn" href="#methodology"><span class="tool-icon">üìñ</span><span
                        class="tool-label">Methodology</span></a>
            </div>
        </section>

        <section class="methodology-section" id="methodology">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h3 style="margin-bottom: 0;">Methodology & Data Dictionary</h3>
                <a href="https://github.com/finmango/research/blob/main/WHITEPAPER_2025.md" target="_blank"
                    rel="noopener noreferrer" class="tool-btn"
                    style="background: var(--orange); color: white; border: none; padding: 0.5rem 1rem; height: auto;">
                    <span class="tool-icon" style="font-size: 1rem;">‚ÜóÔ∏è</span>
                    <span class="tool-label" style="color: white; font-size: 0.8rem;">Read Whitepaper (GitHub)</span>
                </a>
            </div>
            <div class="methodology-grid">
                <div class="methodology-item full-width">
                    <h4>Data Sources</h4>
                    <p>The Financial Health Barometer aggregates official government statistics with real-time
                        volatility data. Our composite indices are calculated daily using the following official
                        datasets:</p>
                    <table class="data-dictionary">
                        <thead>
                            <tr>
                                <th>Variable</th>
                                <th>Source</th>
                                <th>Dataset / Frequency</th>
                                <th>Use in Index</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Unemployment Rate</strong></td>
                                <td>Bureau of Labor Statistics (BLS)</td>
                                <td>LAUS (Local Area Unemployment Statistics) / Monthly</td>
                                <td>Primary driver for <em>Financial Anxiety</em>. Baseline set at 3.5%.</td>
                            </tr>
                            <tr>
                                <td><strong>Rent Burden %</strong></td>
                                <td>Census Bureau</td>
                                <td>ACS 1-Year Estimates (Table B25071) / Annual</td>
                                <td>Primary driver for <em>Housing Stress</em>. 30%+ = cost-burdened.</td>
                            </tr>
                            <tr>
                                <td><strong>Fair Market Rent</strong></td>
                                <td>HUD (Dept. of Housing)</td>
                                <td>FMR API (2-BR median) / Annual</td>
                                <td>Used for relative cost comparison in <em>Housing Stress</em>.</td>
                            </tr>
                            <tr>
                                <td><strong>Poverty Rate</strong></td>
                                <td>Census Bureau</td>
                                <td>SAIPE (Small Area Income and Poverty Estimates) / Annual</td>
                                <td>Primary driver for <em>Food Insecurity</em>.</td>
                            </tr>
                            <tr>
                                <td><strong>Housing Price Index</strong></td>
                                <td>FRED (St. Louis Fed)</td>
                                <td>FHFA All-Transactions Index / Quarterly</td>
                                <td>Measures price volatility for <em>Housing Stress</em>.</td>
                            </tr>
                            <tr>
                                <td><strong>Search Trends</strong></td>
                                <td>Google Trends</td>
                                <td>Real-Time Search Volume / Daily</td>
                                <td>Used as a "Volatility Boost" (+0-10pts) to capture immediate stress spikes.</td>
                            </tr>
                            <tr style="background: rgba(255, 107, 53, 0.05);">
                                <td><strong>Housing Cost Burden</strong></td>
                                <td><a href="https://www.jchs.harvard.edu/state-nations-housing-2025" target="_blank"
                                        style="color: var(--orange); text-decoration: none; font-weight: 600;">Harvard
                                        JCHS</a></td>
                                <td>State of the Nation's Housing 2025 / Annual</td>
                                <td>Authoritative calibration source for <em>Housing Stress</em>. Provides state-level %
                                    of cost-burdened and severely cost-burdened renters.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="methodology-item">
                    <h4>Housing Stress Calculation (Data-Driven)</h4>
                    <p>Housing Stress is calculated using three data-driven components, with <strong>Harvard JCHS 2025
                            data</strong> as an authoritative fallback when Census/HUD API data is unavailable:</p>
                    <ul>
                        <li><strong>Rent Burden Score:</strong> (State Rent Burden % - 25%) √ó 3<br>
                            <em>Primary: Census ACS B25071. Fallback: Harvard JCHS renter cost burden data.</em>
                        </li>
                        <li><strong>FMR Score:</strong> (State FMR / National Avg FMR - 1) √ó 40<br>
                            <em>Primary: HUD Fair Market Rents. Fallback: Harvard JCHS median rent by state.</em>
                        </li>
                        <li><strong>HPI Score:</strong> Housing Price Change % √ó 2<br>
                            <em>Year-over-year home price appreciation from FRED.</em>
                        </li>
                    </ul>
                    <p><strong>Formula:</strong> Housing Stress = (100 + Rent Burden Score + FMR Score + HPI Score) √ó
                        Regional Multiplier</p>
                </div>

                <div class="methodology-item">
                    <h4>Index Interpretation</h4>
                    <p>Indices are relative measures of economic stress, scaled 0-250:</p>
                    <ul>
                        <li><strong>
                                < 90 (Green):</strong> Low Stress / Stable</li>
                        <li><strong>90 - 120 (Yellow):</strong> Moderate Stress</li>
                        <li><strong>120 - 150 (Orange):</strong> Elevated Stress - Warning Signs</li>
                        <li><strong>> 150 (Red):</strong> Crisis Level - Immediate Attention Needed</li>
                    </ul>
                </div>

                <div class="methodology-item full-width">
                    <h4>Academic Note: Heuristic Stress Model (HSM)</h4>
                    <p>The indices presented here utilize a <strong>Heuristic Stress Model</strong> to quantify economic
                        pressure. Unlike raw economic indicators, the HSM standardizes disparate metrics (unemployment,
                        rent burden, search volatility) into a unified 0-250 stress index. This allows for
                        cross-variable comparison similar to the "Misery Index" but with state-level granularity.</p>
                    <p><em>Researcher Note: Indices are heuristic composites designed for relative comparison. For
                            econometric modeling, researchers are advised to use the raw underlying metrics (provided in
                            the full CSV export) rather than the composite index scores.</em></p>
                </div>

                <div class="methodology-item full-width"
                    style="margin-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 2rem;">
                    <h4>Cite This Data</h4>
                    <p>To cite the Financial Health Barometer in publications, please use the following format:</p>
                    <div class="citation-block">
                        FinMango Research Team. (2025). <em>Financial Health Barometer: Real-Time US Economic Stress
                            Indicators</em> [Data set]. FinMango. https://finmango.org/barometer
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- State Detail Panel -->
    <div class="panel-overlay" id="panel-overlay"></div>
    <aside class="state-panel" id="state-panel">
        <button class="panel-close" id="panel-close">‚úï</button>
        <h2 class="panel-title" id="panel-state-name">State Name</h2>
        <div class="panel-indicators" id="panel-indicators"></div>
    </aside>

    <!-- Footer -->
    <footer class="dashboard-footer">
        <div class="footer-citation">
            FinMango Research Team (2025). Financial Health Barometer: Real-Time US Economic Stress Indicators.<br>
            <a href="https://finmango.org/barometer" style="color: var(--orange);">https://finmango.org/barometer</a>
        </div>
        <div style="margin-top: 1.5rem; font-size: 0.75rem; opacity: 0.5;">
            <a href="https://opensource.org/licenses/MIT" target="_blank"
                style="color: inherit; text-decoration: none;">MIT License</a> ¬∑ Open Source
        </div>
    </footer>

    <script src="data/dashboard-data.js?v=20251219"></script>
    <script src="scripts/us-map-content.js"></script>
    <script src="scripts/dashboard-app.js"></script>


    <script>
        // Consolidated Mobile Logic & Announcement Bar
        document.addEventListener('DOMContentLoaded', function () {
            // 1. Announcement Bar Logic
            (function () {
                var announcementBar = document.getElementById('announcementBar');
                var closeBtn = document.getElementById('closeAnnouncement');
                var storageKey = 'barrierBreakersAnnouncementClosedAt_v3';
                var expiryHours = 24; // Hours until bar reappears

                if (announcementBar && closeBtn) {
                    // Check if user has closed it and if 24 hours have passed
                    var closedAt = localStorage.getItem(storageKey);
                    if (closedAt) {
                        var hoursSinceClosed = (Date.now() - parseInt(closedAt)) / (1000 * 60 * 60);
                        if (hoursSinceClosed < expiryHours) {
                            announcementBar.classList.add('hidden');
                            document.body.classList.remove('has-announcement');
                        } else {
                            localStorage.removeItem(storageKey);
                        }
                    }

                    closeBtn.addEventListener('click', function () {
                        announcementBar.classList.add('hidden');
                        document.body.classList.remove('has-announcement');
                        localStorage.setItem(storageKey, Date.now().toString());
                    });

                    // Update height CSS variable
                    var updateHeight = function () {
                        if (!announcementBar.classList.contains('hidden')) {
                            var height = announcementBar.offsetHeight;
                            document.documentElement.style.setProperty('--announcement-height', height + 'px');
                        }
                    };

                    // Initial update & resize listener
                    updateHeight();
                    window.addEventListener('resize', updateHeight);
                }
            })();

            // 2. Mobile Menu & Accordion Logic
            (function () {
                const mobileMenuBtn = document.getElementById("mobileMenuBtn");
                const mobileMenu = document.getElementById("mobileMenu");

                if (!mobileMenuBtn || !mobileMenu) return;

                // Toggle Menu Open/Close
                mobileMenuBtn.addEventListener('click', function (e) {
                    e.stopPropagation();
                    mobileMenu.classList.toggle('active');
                    mobileMenuBtn.classList.toggle('active');
                    document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
                });

                // Event Delegation for Menu Interactions
                mobileMenu.addEventListener('click', function (e) {
                    // A. Handle Accordion Toggles
                    const toggle = e.target.closest('.mobile-dropdown-toggle');
                    if (toggle) {
                        e.preventDefault();
                        e.stopPropagation();

                        // Toggle active state on button
                        toggle.classList.toggle('active');

                        // Toggle content visibility
                        const content = toggle.nextElementSibling;
                        if (content && content.classList.contains('mobile-dropdown-content')) {
                            content.classList.toggle('open');
                        }
                        return;
                    }

                    // B. Handle Link Clicks (Close Menu)
                    const link = e.target.closest('a');
                    if (link) {
                        // Allow navigation to proceed, just close menu
                        mobileMenu.classList.remove('active');
                        mobileMenuBtn.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                });
            })();
        });
    </script>

</body>

</html>